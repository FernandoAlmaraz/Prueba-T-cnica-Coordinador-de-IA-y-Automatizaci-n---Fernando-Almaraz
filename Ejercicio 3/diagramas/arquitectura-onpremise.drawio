<mxfile host="app.diagrams.net" modified="2025-12-31T00:00:00.000Z" agent="5.0" etag="1" version="21.0.0" type="device">
  <diagram name="Arquitectura On-Premise" id="onpremise">
    <mxGraphModel dx="1434" dy="780" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Título -->
        <mxCell id="titulo" value="ARQUITECTURA RAG - ON-PREMISE" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1F4E79;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        
        <!-- ========== FUENTES DE DATOS ========== -->
        <mxCell id="fuentes_titulo" value="FUENTES DE DATOS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="70" width="140" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="confluence" value="Confluence&#xa;(Markdown, HTML)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="100" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="drive" value="Google Drive&#xa;(PDF, Excel, Word)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="160" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="git" value="Repositorios Git&#xa;(Markdown, YAML)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="220" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="erp" value="ERP / CRM&#xa;(Base de datos)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="excel" value="Excel / Sheets&#xa;(Ventas, RRHH, Stock)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="340" width="120" height="50" as="geometry" />
        </mxCell>
        
        <!-- ========== PIPELINE DE INGESTA ========== -->
        <mxCell id="pipeline_titulo" value="PIPELINE DE INGESTA" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="240" y="70" width="160" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="pipeline_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="95" width="200" height="300" as="geometry" />
        </mxCell>
        
        <mxCell id="unstructured" value="Unstructured&#xa;(Extracción de texto)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="110" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="langchain" value="LangChain&#xa;(Chunking 500-1000 tokens)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="180" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="embeddings" value="Sentence Transformers&#xa;(Embeddings locales)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="250" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="metadata" value="+ Metadata&#xa;(source, roles, fecha)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="320" width="140" height="50" as="geometry" />
        </mxCell>
        
        <!-- Flechas Pipeline interno -->
        <mxCell id="arrow_p1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;" edge="1" parent="1" source="unstructured" target="langchain">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_p2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;" edge="1" parent="1" source="langchain" target="embeddings">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_p3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;" edge="1" parent="1" source="embeddings" target="metadata">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- ========== VECTOR STORE ========== -->
        <mxCell id="vectorstore_titulo" value="VECTOR STORE" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="480" y="70" width="120" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="qdrant" value="Qdrant&#xa;(Docker)&#xa;&#xa;Vectores +&#xa;Metadata +&#xa;Índices" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="470" y="100" width="140" height="120" as="geometry" />
        </mxCell>
        
        <!-- ========== APIS TIEMPO REAL ========== -->
        <mxCell id="apis_titulo" value="APIs TIEMPO REAL" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="470" y="240" width="140" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="jira" value="Jira API&#xa;(Tickets, estados)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="470" y="270" width="140" height="45" as="geometry" />
        </mxCell>
        
        <mxCell id="gitlab" value="GitLab API&#xa;(MRs, pipelines)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="470" y="325" width="140" height="45" as="geometry" />
        </mxCell>
        
        <!-- ========== BACKEND ========== -->
        <mxCell id="backend_titulo" value="BACKEND" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="670" y="70" width="100" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="backend_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="650" y="95" width="140" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="nginx" value="Nginx&#xa;(SSL/Proxy)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="665" y="105" width="110" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="middleware" value="Middleware&#xa;(Validación de roles)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="665" y="150" width="110" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="fastapi" value="FastAPI&#xa;(API REST)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="665" y="195" width="110" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="auth" value="JWT / Keycloak&#xa;(Autenticación)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="665" y="240" width="110" height="35" as="geometry" />
        </mxCell>
        
        <!-- ========== LLM ========== -->
        <mxCell id="llm_titulo" value="MODELO DE IA" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="670" y="310" width="100" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="ollama" value="Ollama + Llama 3&#xa;(LLM Local)&#xa;&#xa;Genera respuestas&#xa;con contexto RAG" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="650" y="335" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- ========== USUARIO ========== -->
        <mxCell id="usuario_titulo" value="INTERFACES" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="870" y="70" width="100" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="webapp" value="Web App&#xa;(Next.js)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="850" y="100" width="100" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="slack" value="Slack Bot" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="850" y="160" width="100" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="usuario" value="Usuario" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#1F4E79;strokeColor=#1F4E79;" vertex="1" parent="1">
          <mxGeometry x="985" y="115" width="40" height="80" as="geometry" />
        </mxCell>
        
        <!-- ========== FLECHAS PRINCIPALES ========== -->
        <!-- Fuentes a Pipeline -->
        <mxCell id="f1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1" source="confluence" target="unstructured">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="f2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1" source="drive" target="unstructured">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="f3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1" source="git" target="langchain">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="f4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1" source="erp" target="embeddings">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="f5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1" source="excel" target="metadata">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Pipeline a Qdrant -->
        <mxCell id="p_q" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#82b366;strokeWidth=2;" edge="1" parent="1" source="metadata" target="qdrant">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="430" y="345" />
              <mxPoint x="430" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- Qdrant a Backend -->
        <mxCell id="q_b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#82b366;strokeWidth=2;" edge="1" parent="1" source="qdrant" target="fastapi">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- APIs a Backend -->
        <mxCell id="j_b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#9673a6;strokeWidth=2;" edge="1" parent="1" source="jira" target="fastapi">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="g_b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#9673a6;strokeWidth=2;" edge="1" parent="1" source="gitlab" target="fastapi">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Backend a LLM -->
        <mxCell id="b_l" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#82b366;strokeWidth=2;" edge="1" parent="1" source="fastapi" target="ollama">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Usuario a Interfaces -->
        <mxCell id="u_w" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1" source="usuario" target="webapp">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="u_s" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1" source="usuario" target="slack">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Interfaces a Backend -->
        <mxCell id="w_b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#d79b00;strokeWidth=2;" edge="1" parent="1" source="webapp" target="nginx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s_b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#d79b00;strokeWidth=2;" edge="1" parent="1" source="slack" target="nginx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- ========== LEYENDA ========== -->
        <mxCell id="leyenda_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="850" y="260" width="180" height="160" as="geometry" />
        </mxCell>
        <mxCell id="leyenda_titulo" value="LEYENDA" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="265" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="860" y="290" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg1t" value="Fuentes de datos" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="885" y="287" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="860" y="315" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg2t" value="Pipeline de ingesta" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="885" y="312" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="860" y="340" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg3t" value="Vector Store / LLM" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="885" y="337" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="860" y="365" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg4t" value="APIs tiempo real" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="885" y="362" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="860" y="390" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg5t" value="Seguridad (Middleware)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="885" y="387" width="120" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
